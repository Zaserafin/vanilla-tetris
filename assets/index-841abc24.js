(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))f(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const R of d.addedNodes)R.tagName==="LINK"&&R.rel==="modulepreload"&&f(R)}).observe(document,{childList:!0,subtree:!0});function h(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function f(o){if(o.ep)return;o.ep=!0;const d=h(o);fetch(o.href,d)}})();class Bt{constructor(s=60,h=60){this.isRunning=!1,this.gameTickRate=s,this.lastGameTick=0,this.lastRender=0,this.targetFPS=h,this.frameDuration=1e3/this.targetFPS,this.gameLoop=this.gameLoop.bind(this),this.renderLoop=this.renderLoop.bind(this)}start(){this.isRunning||(this.isRunning=!0,this.gameLoop(),this.renderLoop())}stop(){this.isRunning=!1}update(){}render(){}gameLoop(){if(this.isRunning){const s=performance.now();s-this.lastGameTick>=1e3/this.gameTickRate&&(this.update(),this.lastGameTick=s),requestAnimationFrame(this.gameLoop)}}renderLoop(){if(this.isRunning){const s=performance.now();s-this.lastRender>=this.frameDuration&&(this.render(),this.lastRender=s),requestAnimationFrame(this.renderLoop)}}}const g={playerScore:0,tetrisCount:0,highScore:0,gameOver:!1};class ot{constructor(s,h,f,o="white"){if(!s)throw new Error("Cannot initialize renderer without a proper canvas");this.canvas=s,this.context=this.canvas.getContext("2d"),this.resize({width:h,height:f}),this.setBackgroundColor(o)}setBackgroundColor(s){this.canvas.style.backgroundColor=s}clear(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}drawRect(s,h,f,o,d){this.context.fillStyle=d,this.context.fillRect(s,h,f,o)}drawText(s,h,f,o,d){this.context.fillStyle=d,this.context.font=o,this.context.fillText(s,h,f)}drawImage(s,h,f,o,d){this.context.drawImage(s,h,f,o,d)}getCanvasInfo(){return{width:this.canvas.width,height:this.canvas.height,backgroundColor:this.canvas.style.backgroundColor}}resize({width:s=null,height:h=null}){s&&(this.canvas.width=s),h&&(this.canvas.height=h)}}function we(u){return Object.create(u[Math.floor(Math.random()*u.length)])}function Zt(u,s){let h=[];for(let f=0;f<s;f++){const o=[];for(let d=0;d<u;d++)o.push(0);h.push(o)}return h}function B(u,s,h,f,o="down"){let d={x:Math.trunc(s.x),y:Math.trunc(s.y)};for(let R=0;R<s.template.length;R++)for(let z=0;z<s.template[R].length;z++){if(s.template[R][z]===0)continue;let _=z+d.x,S=R+d.y;if(o==="down"&&(S+1>=f||u[S+1][_]!==0)||o==="right"&&(_+1>=h||u[S][_+1]!==0)||o==="left"&&(_-1<0||u[S][_-1]!==0))return!1}return!0}function jt(u){return{x:Math.trunc(u.x),y:Math.trunc(u.y)}}const C={transparent:"transparent",red:"red",green:"green",blue:"blue",yellow:"yellow",orange:"orange",violet:"violet",coral:"coral",lightgreen:"lightgreen",cyan:"cyan",darkGrey:"#4f4f4f",lineColor:"#ffffff09",solidColor:"lightcoral"},be=[{id:"i",x:4,y:0,color:C.cyan,template:[[1,1,1,1]]},{id:"j",x:4,y:0,color:C.blue,template:[[1,1,1],[0,0,1]]},{id:"l",x:4,y:0,color:C.orange,template:[[1,1,1],[1,0,0]]},{id:"o",x:4,y:0,color:C.yellow,template:[[1,1],[1,1]]},{id:"s",x:4,y:0,color:C.lightgreen,template:[[0,1,1],[1,1,0]]},{id:"t",x:4,y:0,color:C.violet,template:[[0,1,0],[1,1,1]]},{id:"z",x:4,y:0,color:C.coral,template:[[1,1,0],[0,1,1]]}],De={single:100,double:200,triple:300,tetris:800,doubleTetris:1200},c={mainCanvasId:"game-canvas",pieceCanvasId:"piece-canvas",scoreElementId:"score",tetrisElementId:"tetris",highScoreElementId:"highscore",soundEnabled:!0,squareSize:30,backgroundColor:"#4f4f4f",lineColor:"#ffffff09",lineThickness:2,solidColor:"lightcoral",tickRate:4,frameRate:30,canvasHeight:600,canvasWidth:300,boardOffset:4};class Jt extends Bt{constructor(){super(c.tickRate,c.frameRate),this.gameCanvas=document.getElementById(c.mainCanvasId),this.pieceCanvas=document.getElementById(c.pieceCanvasId),this.scoreElement=document.getElementById(c.scoreElementId),this.tetrisElement=document.getElementById(c.tetrisElementId),this.highScoreElement=document.getElementById(c.highScoreElementId),this.gameRenderer=new ot(this.gameCanvas,c.canvasWidth,c.canvasHeight,C.darkGrey),this.pieceRenderer=new ot(this.pieceCanvas,0,0,C.transparent),this.squareCountX=this.gameRenderer.getCanvasInfo().width/c.squareSize,this.squareCountY=this.gameRenderer.getCanvasInfo().height/c.squareSize,this.board=Zt(this.squareCountX,this.squareCountY+c.boardOffset),g.highScore=window.localStorage.getItem(c.highScoreElementId)||0,this.updateScores()}start(){this.currentPiece=we(be),this.nextPiece=we(be),this.renderNextPiece(),super.start()}handleRotationMovement(){B(this.board,this.currentPiece,this.squareCountX,this.squareCountY,"left")&&B(this.board,this.currentPiece,this.squareCountX,this.squareCountY,"right")&&B(this.board,this.currentPiece,this.squareCountX,this.squareCountY,"down")&&(this.currentPiece.template=this.currentPiece.template[0].map((s,h)=>this.currentPiece.template.map(f=>f[h]).reverse()))}handleLeftMovement(){B(this.board,this.currentPiece,this.squareCountX,this.squareCountY,"left")&&this.currentPiece.x--}handleRightMovement(){B(this.board,this.currentPiece,this.squareCountX,this.squareCountY,"right")&&this.currentPiece.x++}checkGameOver(){return this.board[0].some(s=>s!==0)}clearCompleteRows(){let s=0;for(let h=0;h<this.board.length;h++)this.board[h].every(f=>f!==0)&&(s++,this.board.splice(h,1),this.board.unshift(Array(this.squareCountX).fill(0)));s>=4?(g.previousTetris=!0,g.playerScore+=g.previousTetris?De.doubleTetris:De.tetris,g.tetrisCount++):(g.previousTetris=!1,g.playerScore+=s*De.single),this.updateScores()}updateScores(){this.scoreElement.innerText=`Score: ${g.playerScore}`,this.tetrisElement.innerText=`Tetris: ${g.tetrisCount}`,this.highScoreElement.innerText=`Highscore: ${g.highScore}`}update(){if(!g.gameOver)if(B(this.board,this.currentPiece,this.squareCountX,this.squareCountY))this.currentPiece.y++;else{let s=jt({x:this.currentPiece.x,y:this.currentPiece.y});for(let h=0;h<this.currentPiece.template.length;h++)for(let f=0;f<this.currentPiece.template[h].length;f++){if(this.currentPiece.template[h][f]===0)continue;let o=f+s.x,d=h+s.y;this.board[d][o]=1}this.currentPiece.y=0,this.currentPiece.x=Math.trunc(this.squareCountX/2),this.currentPiece=this.nextPiece,this.nextPiece=we(be),this.clearCompleteRows(),this.renderNextPiece(),this.checkGameOver()&&(g.gameOver=!0,g.playerScore>g.highScore&&(g.highScore=g.playerScore,window.localStorage.setItem("highscore",g.highScore)))}}renderBackground(){for(let s=0;s<this.squareCountX;s++)this.gameRenderer.drawRect(c.squareSize*s-c.lineThickness,0,c.lineThickness,this.gameRenderer.getCanvasInfo().height,C.lineColor);for(let s=0;s<this.squareCountY;s++)this.gameRenderer.drawRect(0,c.squareSize*s-c.lineThickness,this.gameRenderer.getCanvasInfo().width,c.lineThickness,C.lineColor)}renderBoard(){for(let s=0;s<this.board.length;s++){const h=this.board[s];for(let f=0;f<h.length;f++)this.board[s][f]!==0&&this.gameRenderer.drawRect(f*c.squareSize,s*c.squareSize,c.squareSize-c.lineThickness,c.squareSize-c.lineThickness,C.solidColor)}}renderCurrentPiece(){for(let s=0;s<this.currentPiece.template.length;s++)for(let h=0;h<this.currentPiece.template[s].length;h++)this.currentPiece.template[s][h]!==0&&this.gameRenderer.drawRect((this.currentPiece.x+h)*c.squareSize,(this.currentPiece.y+s)*c.squareSize,c.squareSize-c.lineThickness,c.squareSize-c.lineThickness,this.currentPiece.color)}renderNextPiece(){this.pieceRenderer.resize({width:this.nextPiece.template[0].length*c.squareSize,height:c.squareSize*2});for(let s=0;s<this.nextPiece.template.length;s++)for(let h=0;h<this.nextPiece.template[s].length;h++)this.nextPiece.template[s][h]!==0&&this.pieceRenderer.drawRect(h*c.squareSize,s*c.squareSize,c.squareSize-c.lineThickness,c.squareSize-c.lineThickness,this.nextPiece.color)}renderGameOver(){this.gameRenderer.setBackgroundColor(C.solidColor)}render(){if(this.gameRenderer.clear(),g.gameOver){this.renderGameOver();return}this.renderBackground(),this.renderBoard(),this.renderCurrentPiece()}}function Qt(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var ct={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(u){(function(s,h,f,o){var d=["","webkit","Moz","MS","ms","o"],R=h.createElement("div"),z="function",_=Math.round,S=Math.abs,ge=Date.now;function Te(e,t,i){return setTimeout(Ee(e,i),t)}function V(e,t,i){return Array.isArray(e)?(D(e,i[t],i),!0):!1}function D(e,t,i){var r;if(e)if(e.forEach)e.forEach(t,i);else if(e.length!==o)for(r=0;r<e.length;)t.call(i,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(i,e[r],r,e)}function qe(e,t,i){var r="DEPRECATED METHOD: "+t+`
`+i+` AT 
`;return function(){var n=new Error("get-stack-trace"),a=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",l=s.console&&(s.console.warn||s.console.log);return l&&l.call(s.console,r,a),e.apply(this,arguments)}}var x;typeof Object.assign!="function"?x=function(t){if(t===o||t===null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),r=1;r<arguments.length;r++){var n=arguments[r];if(n!==o&&n!==null)for(var a in n)n.hasOwnProperty(a)&&(i[a]=n[a])}return i}:x=Object.assign;var Le=qe(function(t,i,r){for(var n=Object.keys(i),a=0;a<n.length;)(!r||r&&t[n[a]]===o)&&(t[n[a]]=i[n[a]]),a++;return t},"extend","Use `assign`."),ut=qe(function(t,i){return Le(t,i,!0)},"merge","Use `assign`.");function P(e,t,i){var r=t.prototype,n;n=e.prototype=Object.create(r),n.constructor=e,n._super=r,i&&x(n,i)}function Ee(e,t){return function(){return e.apply(t,arguments)}}function ye(e,t){return typeof e==z?e.apply(t&&t[0]||o,t):e}function Ue(e,t){return e===o?t:e}function ie(e,t,i){D(ne(t),function(r){e.addEventListener(r,i,!1)})}function re(e,t,i){D(ne(t),function(r){e.removeEventListener(r,i,!1)})}function Xe(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function Y(e,t){return e.indexOf(t)>-1}function ne(e){return e.trim().split(/\s+/g)}function W(e,t,i){if(e.indexOf&&!i)return e.indexOf(t);for(var r=0;r<e.length;){if(i&&e[r][i]==t||!i&&e[r]===t)return r;r++}return-1}function se(e){return Array.prototype.slice.call(e,0)}function Ye(e,t,i){for(var r=[],n=[],a=0;a<e.length;){var l=t?e[a][t]:e[a];W(n,l)<0&&r.push(e[a]),n[a]=l,a++}return i&&(t?r=r.sort(function(T,y){return T[t]>y[t]}):r=r.sort()),r}function ae(e,t){for(var i,r,n=t[0].toUpperCase()+t.slice(1),a=0;a<d.length;){if(i=d[a],r=i?i+n:t,r in e)return r;a++}return o}var ft=1;function dt(){return ft++}function ke(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||s}var vt=/mobile|tablet|ip(ad|hone|od)|android/i,He="ontouchstart"in s,pt=ae(s,"PointerEvent")!==o,mt=He&&vt.test(navigator.userAgent),Z="touch",gt="pen",Ie="mouse",Tt="kinect",Et=25,E=1,k=2,v=4,I=8,oe=1,j=2,J=4,Q=8,K=16,M=j|J,H=Q|K,Fe=M|H,ze=["x","y"],he=["clientX","clientY"];function O(e,t){var i=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(r){ye(e.options.enable,[e])&&i.handler(r)},this.init()}O.prototype={handler:function(){},init:function(){this.evEl&&ie(this.element,this.evEl,this.domHandler),this.evTarget&&ie(this.target,this.evTarget,this.domHandler),this.evWin&&ie(ke(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&re(this.element,this.evEl,this.domHandler),this.evTarget&&re(this.target,this.evTarget,this.domHandler),this.evWin&&re(ke(this.element),this.evWin,this.domHandler)}};function yt(e){var t,i=e.options.inputClass;return i?t=i:pt?t=Ce:mt?t=ue:He?t=_e:t=le,new t(e,It)}function It(e,t,i){var r=i.pointers.length,n=i.changedPointers.length,a=t&E&&r-n===0,l=t&(v|I)&&r-n===0;i.isFirst=!!a,i.isFinal=!!l,a&&(e.session={}),i.eventType=t,Pt(e,i),e.emit("hammer.input",i),e.recognize(i),e.session.prevInput=i}function Pt(e,t){var i=e.session,r=t.pointers,n=r.length;i.firstInput||(i.firstInput=Ve(t)),n>1&&!i.firstMultiple?i.firstMultiple=Ve(t):n===1&&(i.firstMultiple=!1);var a=i.firstInput,l=i.firstMultiple,m=l?l.center:a.center,T=t.center=We(r);t.timeStamp=ge(),t.deltaTime=t.timeStamp-a.timeStamp,t.angle=Pe(m,T),t.distance=ce(m,T),Ct(i,t),t.offsetDirection=Be(t.deltaX,t.deltaY);var y=Ge(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=y.x,t.overallVelocityY=y.y,t.overallVelocity=S(y.x)>S(y.y)?y.x:y.y,t.scale=l?Ot(l.pointers,r):1,t.rotation=l?St(l.pointers,r):0,t.maxPointers=i.prevInput?t.pointers.length>i.prevInput.maxPointers?t.pointers.length:i.prevInput.maxPointers:t.pointers.length,_t(i,t);var b=e.element;Xe(t.srcEvent.target,b)&&(b=t.srcEvent.target),t.target=b}function Ct(e,t){var i=t.center,r=e.offsetDelta||{},n=e.prevDelta||{},a=e.prevInput||{};(t.eventType===E||a.eventType===v)&&(n=e.prevDelta={x:a.deltaX||0,y:a.deltaY||0},r=e.offsetDelta={x:i.x,y:i.y}),t.deltaX=n.x+(i.x-r.x),t.deltaY=n.y+(i.y-r.y)}function _t(e,t){var i=e.lastInterval||t,r=t.timeStamp-i.timeStamp,n,a,l,m;if(t.eventType!=I&&(r>Et||i.velocity===o)){var T=t.deltaX-i.deltaX,y=t.deltaY-i.deltaY,b=Ge(r,T,y);a=b.x,l=b.y,n=S(b.x)>S(b.y)?b.x:b.y,m=Be(T,y),e.lastInterval=t}else n=i.velocity,a=i.velocityX,l=i.velocityY,m=i.direction;t.velocity=n,t.velocityX=a,t.velocityY=l,t.direction=m}function Ve(e){for(var t=[],i=0;i<e.pointers.length;)t[i]={clientX:_(e.pointers[i].clientX),clientY:_(e.pointers[i].clientY)},i++;return{timeStamp:ge(),pointers:t,center:We(t),deltaX:e.deltaX,deltaY:e.deltaY}}function We(e){var t=e.length;if(t===1)return{x:_(e[0].clientX),y:_(e[0].clientY)};for(var i=0,r=0,n=0;n<t;)i+=e[n].clientX,r+=e[n].clientY,n++;return{x:_(i/t),y:_(r/t)}}function Ge(e,t,i){return{x:t/e||0,y:i/e||0}}function Be(e,t){return e===t?oe:S(e)>=S(t)?e<0?j:J:t<0?Q:K}function ce(e,t,i){i||(i=ze);var r=t[i[0]]-e[i[0]],n=t[i[1]]-e[i[1]];return Math.sqrt(r*r+n*n)}function Pe(e,t,i){i||(i=ze);var r=t[i[0]]-e[i[0]],n=t[i[1]]-e[i[1]];return Math.atan2(n,r)*180/Math.PI}function St(e,t){return Pe(t[1],t[0],he)+Pe(e[1],e[0],he)}function Ot(e,t){return ce(t[0],t[1],he)/ce(e[0],e[1],he)}var Nt={mousedown:E,mousemove:k,mouseup:v},Rt="mousedown",At="mousemove mouseup";function le(){this.evEl=Rt,this.evWin=At,this.pressed=!1,O.apply(this,arguments)}P(le,O,{handler:function(t){var i=Nt[t.type];i&E&&t.button===0&&(this.pressed=!0),i&k&&t.which!==1&&(i=v),this.pressed&&(i&v&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[t],changedPointers:[t],pointerType:Ie,srcEvent:t}))}});var xt={pointerdown:E,pointermove:k,pointerup:v,pointercancel:I,pointerout:I},Mt={2:Z,3:gt,4:Ie,5:Tt},Ze="pointerdown",je="pointermove pointerup pointercancel";s.MSPointerEvent&&!s.PointerEvent&&(Ze="MSPointerDown",je="MSPointerMove MSPointerUp MSPointerCancel");function Ce(){this.evEl=Ze,this.evWin=je,O.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}P(Ce,O,{handler:function(t){var i=this.store,r=!1,n=t.type.toLowerCase().replace("ms",""),a=xt[n],l=Mt[t.pointerType]||t.pointerType,m=l==Z,T=W(i,t.pointerId,"pointerId");a&E&&(t.button===0||m)?T<0&&(i.push(t),T=i.length-1):a&(v|I)&&(r=!0),!(T<0)&&(i[T]=t,this.callback(this.manager,a,{pointers:i,changedPointers:[t],pointerType:l,srcEvent:t}),r&&i.splice(T,1))}});var wt={touchstart:E,touchmove:k,touchend:v,touchcancel:I},bt="touchstart",Dt="touchstart touchmove touchend touchcancel";function Je(){this.evTarget=bt,this.evWin=Dt,this.started=!1,O.apply(this,arguments)}P(Je,O,{handler:function(t){var i=wt[t.type];if(i===E&&(this.started=!0),!!this.started){var r=qt.call(this,t,i);i&(v|I)&&r[0].length-r[1].length===0&&(this.started=!1),this.callback(this.manager,i,{pointers:r[0],changedPointers:r[1],pointerType:Z,srcEvent:t})}}});function qt(e,t){var i=se(e.touches),r=se(e.changedTouches);return t&(v|I)&&(i=Ye(i.concat(r),"identifier",!0)),[i,r]}var Lt={touchstart:E,touchmove:k,touchend:v,touchcancel:I},Ut="touchstart touchmove touchend touchcancel";function ue(){this.evTarget=Ut,this.targetIds={},O.apply(this,arguments)}P(ue,O,{handler:function(t){var i=Lt[t.type],r=Xt.call(this,t,i);r&&this.callback(this.manager,i,{pointers:r[0],changedPointers:r[1],pointerType:Z,srcEvent:t})}});function Xt(e,t){var i=se(e.touches),r=this.targetIds;if(t&(E|k)&&i.length===1)return r[i[0].identifier]=!0,[i,i];var n,a,l=se(e.changedTouches),m=[],T=this.target;if(a=i.filter(function(y){return Xe(y.target,T)}),t===E)for(n=0;n<a.length;)r[a[n].identifier]=!0,n++;for(n=0;n<l.length;)r[l[n].identifier]&&m.push(l[n]),t&(v|I)&&delete r[l[n].identifier],n++;if(m.length)return[Ye(a.concat(m),"identifier",!0),m]}var Yt=2500,Qe=25;function _e(){O.apply(this,arguments);var e=Ee(this.handler,this);this.touch=new ue(this.manager,e),this.mouse=new le(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}P(_e,O,{handler:function(t,i,r){var n=r.pointerType==Z,a=r.pointerType==Ie;if(!(a&&r.sourceCapabilities&&r.sourceCapabilities.firesTouchEvents)){if(n)kt.call(this,i,r);else if(a&&Ht.call(this,r))return;this.callback(t,i,r)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function kt(e,t){e&E?(this.primaryTouch=t.changedPointers[0].identifier,Ke.call(this,t)):e&(v|I)&&Ke.call(this,t)}function Ke(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var i={x:t.clientX,y:t.clientY};this.lastTouches.push(i);var r=this.lastTouches,n=function(){var a=r.indexOf(i);a>-1&&r.splice(a,1)};setTimeout(n,Yt)}}function Ht(e){for(var t=e.srcEvent.clientX,i=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var n=this.lastTouches[r],a=Math.abs(t-n.x),l=Math.abs(i-n.y);if(a<=Qe&&l<=Qe)return!0}return!1}var $e=ae(R.style,"touchAction"),et=$e!==o,tt="compute",it="auto",Se="manipulation",F="none",$="pan-x",ee="pan-y",fe=zt();function Oe(e,t){this.manager=e,this.set(t)}Oe.prototype={set:function(e){e==tt&&(e=this.compute()),et&&this.manager.element.style&&fe[e]&&(this.manager.element.style[$e]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return D(this.manager.recognizers,function(t){ye(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),Ft(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,i=e.offsetDirection;if(this.manager.session.prevented){t.preventDefault();return}var r=this.actions,n=Y(r,F)&&!fe[F],a=Y(r,ee)&&!fe[ee],l=Y(r,$)&&!fe[$];if(n){var m=e.pointers.length===1,T=e.distance<2,y=e.deltaTime<250;if(m&&T&&y)return}if(!(l&&a)&&(n||a&&i&M||l&&i&H))return this.preventSrc(t)},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};function Ft(e){if(Y(e,F))return F;var t=Y(e,$),i=Y(e,ee);return t&&i?F:t||i?t?$:ee:Y(e,Se)?Se:it}function zt(){if(!et)return!1;var e={},t=s.CSS&&s.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){e[i]=t?s.CSS.supports("touch-action",i):!0}),e}var de=1,N=2,G=4,X=8,q=X,te=16,w=32;function L(e){this.options=x({},this.defaults,e||{}),this.id=dt(),this.manager=null,this.options.enable=Ue(this.options.enable,!0),this.state=de,this.simultaneous={},this.requireFail=[]}L.prototype={defaults:{},set:function(e){return x(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(V(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=ve(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return V(e,"dropRecognizeWith",this)?this:(e=ve(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(V(e,"requireFailure",this))return this;var t=this.requireFail;return e=ve(e,this),W(t,e)===-1&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(V(e,"dropRequireFailure",this))return this;e=ve(e,this);var t=W(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,i=this.state;function r(n){t.manager.emit(n,e)}i<X&&r(t.options.event+rt(i)),r(t.options.event),e.additionalEvent&&r(e.additionalEvent),i>=X&&r(t.options.event+rt(i))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=w},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(w|de)))return!1;e++}return!0},recognize:function(e){var t=x({},e);if(!ye(this.options.enable,[this,t])){this.reset(),this.state=w;return}this.state&(q|te|w)&&(this.state=de),this.state=this.process(t),this.state&(N|G|X|te)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}};function rt(e){return e&te?"cancel":e&X?"end":e&G?"move":e&N?"start":""}function nt(e){return e==K?"down":e==Q?"up":e==j?"left":e==J?"right":""}function ve(e,t){var i=t.manager;return i?i.get(e):e}function A(){L.apply(this,arguments)}P(A,L,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return t===0||e.pointers.length===t},process:function(e){var t=this.state,i=e.eventType,r=t&(N|G),n=this.attrTest(e);return r&&(i&I||!n)?t|te:r||n?i&v?t|X:t&N?t|G:N:w}});function pe(){A.apply(this,arguments),this.pX=null,this.pY=null}P(pe,A,{defaults:{event:"pan",threshold:10,pointers:1,direction:Fe},getTouchAction:function(){var e=this.options.direction,t=[];return e&M&&t.push(ee),e&H&&t.push($),t},directionTest:function(e){var t=this.options,i=!0,r=e.distance,n=e.direction,a=e.deltaX,l=e.deltaY;return n&t.direction||(t.direction&M?(n=a===0?oe:a<0?j:J,i=a!=this.pX,r=Math.abs(e.deltaX)):(n=l===0?oe:l<0?Q:K,i=l!=this.pY,r=Math.abs(e.deltaY))),e.direction=n,i&&r>t.threshold&&n&t.direction},attrTest:function(e){return A.prototype.attrTest.call(this,e)&&(this.state&N||!(this.state&N)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=nt(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}});function Ne(){A.apply(this,arguments)}P(Ne,A,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[F]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&N)},emit:function(e){if(e.scale!==1){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}});function Re(){L.apply(this,arguments),this._timer=null,this._input=null}P(Re,L,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[it]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,r=e.distance<t.threshold,n=e.deltaTime>t.time;if(this._input=e,!r||!i||e.eventType&(v|I)&&!n)this.reset();else if(e.eventType&E)this.reset(),this._timer=Te(function(){this.state=q,this.tryEmit()},t.time,this);else if(e.eventType&v)return q;return w},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===q&&(e&&e.eventType&v?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=ge(),this.manager.emit(this.options.event,this._input)))}});function Ae(){A.apply(this,arguments)}P(Ae,A,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[F]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&N)}});function xe(){A.apply(this,arguments)}P(xe,A,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:M|H,pointers:1},getTouchAction:function(){return pe.prototype.getTouchAction.call(this)},attrTest:function(e){var t=this.options.direction,i;return t&(M|H)?i=e.overallVelocity:t&M?i=e.overallVelocityX:t&H&&(i=e.overallVelocityY),this._super.attrTest.call(this,e)&&t&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&S(i)>this.options.velocity&&e.eventType&v},emit:function(e){var t=nt(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}});function me(){L.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}P(me,L,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Se]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,r=e.distance<t.threshold,n=e.deltaTime<t.time;if(this.reset(),e.eventType&E&&this.count===0)return this.failTimeout();if(r&&n&&i){if(e.eventType!=v)return this.failTimeout();var a=this.pTime?e.timeStamp-this.pTime<t.interval:!0,l=!this.pCenter||ce(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,!l||!a?this.count=1:this.count+=1,this._input=e;var m=this.count%t.taps;if(m===0)return this.hasRequireFailures()?(this._timer=Te(function(){this.state=q,this.tryEmit()},t.interval,this),N):q}return w},failTimeout:function(){return this._timer=Te(function(){this.state=w},this.options.interval,this),w},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==q&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function U(e,t){return t=t||{},t.recognizers=Ue(t.recognizers,U.defaults.preset),new Me(e,t)}U.VERSION="2.0.7",U.defaults={domEvents:!1,touchAction:tt,enable:!0,inputTarget:null,inputClass:null,preset:[[Ae,{enable:!1}],[Ne,{enable:!1},["rotate"]],[xe,{direction:M}],[pe,{direction:M},["swipe"]],[me],[me,{event:"doubletap",taps:2},["tap"]],[Re]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Vt=1,st=2;function Me(e,t){this.options=x({},U.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=yt(this),this.touchAction=new Oe(this,this.options.touchAction),at(this,!0),D(this.options.recognizers,function(i){var r=this.add(new i[0](i[1]));i[2]&&r.recognizeWith(i[2]),i[3]&&r.requireFailure(i[3])},this)}Me.prototype={set:function(e){return x(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?st:Vt},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var i,r=this.recognizers,n=t.curRecognizer;(!n||n&&n.state&q)&&(n=t.curRecognizer=null);for(var a=0;a<r.length;)i=r[a],t.stopped!==st&&(!n||i==n||i.canRecognizeWith(n))?i.recognize(e):i.reset(),!n&&i.state&(N|G|X)&&(n=t.curRecognizer=i),a++}},get:function(e){if(e instanceof L)return e;for(var t=this.recognizers,i=0;i<t.length;i++)if(t[i].options.event==e)return t[i];return null},add:function(e){if(V(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(V(e,"remove",this))return this;if(e=this.get(e),e){var t=this.recognizers,i=W(t,e);i!==-1&&(t.splice(i,1),this.touchAction.update())}return this},on:function(e,t){if(e!==o&&t!==o){var i=this.handlers;return D(ne(e),function(r){i[r]=i[r]||[],i[r].push(t)}),this}},off:function(e,t){if(e!==o){var i=this.handlers;return D(ne(e),function(r){t?i[r]&&i[r].splice(W(i[r],t),1):delete i[r]}),this}},emit:function(e,t){this.options.domEvents&&Wt(e,t);var i=this.handlers[e]&&this.handlers[e].slice();if(!(!i||!i.length)){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var r=0;r<i.length;)i[r](t),r++}},destroy:function(){this.element&&at(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function at(e,t){var i=e.element;if(i.style){var r;D(e.options.cssProps,function(n,a){r=ae(i.style,a),t?(e.oldCssProps[r]=i.style[r],i.style[r]=n):i.style[r]=e.oldCssProps[r]||""}),t||(e.oldCssProps={})}}function Wt(e,t){var i=h.createEvent("Event");i.initEvent(e,!0,!0),i.gesture=t,t.target.dispatchEvent(i)}x(U,{INPUT_START:E,INPUT_MOVE:k,INPUT_END:v,INPUT_CANCEL:I,STATE_POSSIBLE:de,STATE_BEGAN:N,STATE_CHANGED:G,STATE_ENDED:X,STATE_RECOGNIZED:q,STATE_CANCELLED:te,STATE_FAILED:w,DIRECTION_NONE:oe,DIRECTION_LEFT:j,DIRECTION_RIGHT:J,DIRECTION_UP:Q,DIRECTION_DOWN:K,DIRECTION_HORIZONTAL:M,DIRECTION_VERTICAL:H,DIRECTION_ALL:Fe,Manager:Me,Input:O,TouchAction:Oe,TouchInput:ue,MouseInput:le,PointerEventInput:Ce,TouchMouseInput:_e,SingleTouchInput:Je,Recognizer:L,AttrRecognizer:A,Tap:me,Pan:pe,Swipe:xe,Pinch:Ne,Rotate:Ae,Press:Re,on:ie,off:re,each:D,merge:ut,extend:Le,assign:x,inherit:P,bindFn:Ee,prefixed:ae});var Gt=typeof s<"u"?s:typeof self<"u"?self:{};Gt.Hammer=U,typeof o=="function"&&o.amd?o(function(){return U}):u.exports?u.exports=U:s[f]=U})(window,document,"Hammer")})(ct);var Kt=ct.exports;const $t=Qt(Kt),ht=document.getElementById("start-button"),ei=document.getElementById("game-canvas"),lt=new $t(ei),p=new Jt;ht.addEventListener("click",u=>{u.preventDefault(),u.stopPropagation(),ht.style.display="none",p.start()});lt.on("swipe",u=>{u.deltaX<0&&(p==null||p.handleLeftMovement()),u.deltaX>0&&(p==null||p.handleRightMovement())});lt.on("tap",u=>{p==null||p.handleRotationMovement()});window.addEventListener("keydown",u=>{u.key==="ArrowLeft"&&(p==null||p.handleLeftMovement()),u.key==="ArrowRight"&&(p==null||p.handleRightMovement()),u.key==="ArrowUp"&&(p==null||p.handleRotationMovement())});
